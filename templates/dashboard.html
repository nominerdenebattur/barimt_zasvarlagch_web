{% extends "base.html" %}
{% block title %}Хянах{% endblock %}

{% block extra_head %}
<style>
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 20px;
  }

  /* 1) Дээд toolbar: фильтер + үйлдэл нэг мөрөнд */
  .toolbar {
    display: flex;
    gap: 16px;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap; /* жижиг дэлгэцэнд эвтэйхэн */
    margin-bottom: 16px;
  }
  .date-filter {
    display: flex;
    gap: 12px;
    align-items: center;
    flex-wrap: wrap;
  }

  h2, h3 {
    color: var(--text);
    margin: 10px 0;
  }

  /* 2) Хоёр хүснэгтийг зэрэгцүүлэх grid */
  .tables-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }
  @media (max-width: 1024px) {
    .tables-grid {
      grid-template-columns: 1fr; /* жижиг дэлгэцэнд давхарлана */
    }
  }

  .data-section {
    padding: 15px;
    background: var(--bg);
    border-radius: 6px;
  }

  /* Хүснэгтийн суурь гоёл */
  .document-box {
    overflow: auto;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 720px; /* жижиг дэлгэцэнд overflow-оор гүйлгэнэ */
  }
  thead th {
      position: sticky;
      top: 0;
      background: var(--brand);
      color: #fff;
      text-align: left;
      padding: 10px;
      z-index: 1;
  }
  tbody td {
    border-bottom: 1px solid var(--border);
    padding: 8px 10px;
  }
  .tables-grid{
      padding: 16px;
      position: sticky;
      top: 16px;
  }
</style>
{% endblock %}

{% block content %}
<div class="card">
  <!-- Toolbar: фильтер + Баримт харах -->
  <div class="toolbar">
    <form method="GET" action="" class="date-filter">
      <label for="selected_date">Огноо:</label>
      <input type="date" name="selected_date" id="selected_date" value="{{ selected_date|default:'' }}">
      <button type="submit" class="btn">Шүүх</button>
    </form>

    <div class="actions">
      <button id="exportBtn" class="btn" type="button">Баримт харах</button>
    </div>
  </div>

  <h2>Шивсэн баримтын жагсаалт</h2>

  <!-- Хоёр хүснэгт: зэрэгцүүлсэн -->
  <div class="tables-grid">
    <!-- Хүснэгт 1 -->
    <section class="data-section">
      <h3>Баримтын жагсаалт</h3>
      <div class="document-box">
        <table>
          <thead>
            <tr>
              <th scope="col">№</th>
              <th scope="col">Bill ID</th>
              <th scope="col">Нийт дүн</th>
              <th scope="col">Дэлгүүр</th>
              <th scope="col">Reg</th>
              <th scope="col">Lottery</th>
              <th scope="col">Огноо</th>
            </tr>
          </thead>
          <tbody>
            {% for barimt in barimtuud %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ barimt.billId }}</td>
                <td>{{ barimt.totalAmount }}</td>
                <td>{{ barimt.storeNo }}</td>
                <td>{{ barimt.companyReg }}</td>
                <td>{{ barimt.lottery }}</td>
                <td>{{ barimt.created }}</td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="7">Одоогоор баримт байхгүй байна.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <!-- Хүснэгт 2 -->
    <section class="data-section">
      <h3>Сугалааны дугааргүй баримтын жагсаалт</h3>
      <div class="document-box">
        <table>
          <thead>
            <tr>
              <th scope="col">№</th>
              <th scope="col">Bill ID</th>
              <th scope="col">Нийт дүн</th>
              <th scope="col">Дэлгүүр</th>
              <th scope="col">Reg</th>
              <th scope="col">Lottery</th>
              <th scope="col">Огноо</th>
            </tr>
          </thead>
          <tbody>
            {% for barimt in lottery_hooson_barimtuud %}
              <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ barimt.billId }}</td>
                <td>{{ barimt.totalAmount }}</td>
                <td>{{ barimt.storeNo }}</td>
                <td>{{ barimt.companyReg }}</td>
                <td>{{ barimt.lottery }}</td>
                <td>{{ barimt.created }}</td>
              </tr>
            {% empty %}
              <tr>
                <td colspan="7">Одоогоор баримт байхгүй байна.</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>
  </div>
</div>
{% endblock %}
